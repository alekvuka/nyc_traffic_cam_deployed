(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{45:function(e,t,a){e.exports=a(60)},50:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),i=a.n(c),o=(a(50),a(6)),u=a(7),s=a(9),l=a(8),m=a(16),d=a(39),p=a(20),h=function(e){var t=e.avenues.map((function(t,a){return r.a.createElement(m.a,{key:a,onClick:function(){return e.fetchCameras(t.id)}},t.name)}));return r.a.createElement("div",null,r.a.createElement(p.b,{to:"/cameras"},r.a.createElement(d.a,null,t)))},f=function(e){return r.a.createElement(p.b,{to:"/"},r.a.createElement(m.a,{variant:"danger",onClick:e.reset},"reset"))},E=a(17),b=a(41),v=function(e){return r.a.createElement(p.b,{to:"/request"},r.a.createElement(m.a,{variant:"warning",onClick:e.displayInputForm},"request new avenues"))},O=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(b.a,null,r.a.createElement(h,{avenues:this.props.avenues,fetchCameras:this.props.fetchCameras,handleOptionClick:this.handleOptionClick}),r.a.createElement(f,{reset:this.handleOnClick}),r.a.createElement(v,{displayInputForm:this.changeDisplayInputForm})))}},{key:"componentDidMount",value:function(){console.log("a"),this.props.fetchAvenues(),console.log("b")}}]),a}(n.Component),j=Object(E.b)((function(e){return{avenues:e.avenues,requestCreated:e.requestCreated}}),(function(e){return{fetchCameras:function(t){return e(function(e){return function(t){t({type:"LOADING_CAMERAS"}),fetch("/cameras/".concat(e)).then((function(e){return e.json()})).then((function(e){t({type:"ADD_CAMERAS",cameras:e})}))}}(t))},reset:function(){return e({action:"RESET"})},fetchAvenues:function(){return e((function(e){e({type:"LOADING_AVENUES"}),fetch("/avenues").then((function(e){return e.json()})).then((function(t){e({type:"ADD_AVENUES",avenues:t})}))}))}}}))(O),C=function(e){return r.a.createElement("div",null,r.a.createElement("h2",null,e.text))},y=function(e){return r.a.createElement("div",null,r.a.createElement(m.a,{className:"fixed-right",bg:"primary",onClick:function(){return e.closeCam(e.camera)}},"X"))},g=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).updateImage=function(){n.setState({url:n.props.url+Math.random()})},n.state={url:e.url+Math.random()},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval((function(){return e.updateImage()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("img",{src:this.state.url,alt:this.props.desc,height:"320",width:"400"}))}}]),a}(n.Component),k=a(31),A=(n.Component,function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(k.a,null,r.a.createElement(C,{text:this.props.description}),r.a.createElement(y,{text:this.props.description,variant:this.props.variant,closeCam:this.props.closeCam,camera:this.props}),r.a.createElement(g,{url:this.props.url,desc:this.props.description}))}}]),a}(n.Component)),S=a(23),D=a(44),R=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).actionsAfterTimeout=function(){e.props.redirect()},e}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(D.a,{variant:this.props.variant}," ",this.props.text))}},{key:"componentDidMount",value:function(){this.timerID=setInterval(this.actionsAfterTimeout,2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}}]),a}(n.Component),q=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).closeButtonClicked=function(e){n.props.removeCam(e.url),n.setState({cameraDeleted:e.description})},n.resetCameraDeleted=function(){n.setState({cameraDeleted:""})},n.checkDeletionAlert=function(){if(n.state.cameraDeleted){var e="Removed camera ".concat(n.state.cameraDeleted,"!");return r.a.createElement(R,{variant:"primary",text:e,redirect:n.resetCameraDeleted})}},n.renderCameras=function(){return n.props.cameras.map((function(e,t){return r.a.createElement(A,{key:t,variant:"primary",description:e.description,url:e.url,closeCam:n.closeButtonClicked})}))},n.state={cameraDeleted:""},n}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(S.a,{fluid:!0},this.checkDeletionAlert(),this.renderCameras())}}]),a}(n.Component),w=Object(E.b)((function(e){return{cameras:e.cameras}}),(function(e){return{removeCam:function(t){return e({type:"REMOVE_CAMERA",url:t})}}}))(q),T=a(5),N=a(10),I=a(18),x=a(22),_=a(36),M=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleOnChange=function(e){"email"===e.target.id?n.setState(Object(N.a)(Object(N.a)({},n.state),{},{email:e.target.value})):n.setState(Object(N.a)(Object(N.a)({},n.state),{},{request:e.target.value}))},n.state={request:"",email:""},n}return Object(u.a)(a,[{key:"handleOnSubmit",value:function(e){e.preventDefault(),this.props.postRequest(this.state),this.setState({request:"",email:""})}},{key:"render",value:function(){var e=this;return r.a.createElement(S.a,{fluid:!0},r.a.createElement(I.a,{bg:"light",text:"white",style:{width:"36em"}},r.a.createElement(x.a,{className:"mb-3"},r.a.createElement(x.a.Prepend,null,r.a.createElement(x.a.Text,{id:"basic-addon1"},"email -> ")),r.a.createElement(_.a,{id:"email",onChange:this.handleOnChange,placeholder:"","aria-label":"Username","aria-describedby":"basic-addon1"})),r.a.createElement(x.a,{className:"mb-3"},r.a.createElement(x.a.Prepend,null,r.a.createElement(x.a.Text,{id:"basic-addon1"},"Ave. Request -> ")),r.a.createElement(_.a,{id:"request",onChange:this.handleOnChange,placeholder:"","aria-label":"Username","aria-describedby":"basic-addon1"})),r.a.createElement(m.a,{variant:"warning",type:"submit",onClick:function(t){return e.handleOnSubmit(t)}},"Send Request")))}}]),a}(n.Component),U=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setRedirect=function(){n.setState({redirect:!0})},n.checkRedirect=function(){if(n.state.redirect)return n.props.requestAlertSeen(!0),r.a.createElement(T.a,{to:"/"})},n.checkAlert=function(){if(n.props.requestCreated){var e="Your request for ".concat(n.props.requestCreated.text," was sucsefully submitted!");return r.a.createElement("div",null,r.a.createElement(R,{text:e,variant:"warning",redirect:n.setRedirect})," ")}},n.state={redirect:!1},n}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,this.checkAlert(),r.a.createElement(M,{postRequest:this.props.postRequest}),this.checkRedirect())}}]),a}(n.Component),B=Object(E.b)((function(e){return{requestCreated:e.requestCreated}}),(function(e){return{postRequest:function(t){return e((a=t,function(e){e({type:"SENDING_REQUEST"}),fetch("/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(t){e({type:"REQUEST_SENT",data:t})})).catch((function(e){console.error("Error:",e)}))}));var a},requestAlertSeen:function(t){return e({type:"REQUEST_ALERT_SEEN",action:t})}}}))(U),V=a(42),F=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(S.a,{fluid:!0},r.a.createElement(I.a,{className:"text-center",bg:"dark",text:"white"},r.a.createElement(I.a.Header,null),r.a.createElement(I.a.Body,null,r.a.createElement(I.a.Title,null,"Welcome to NYC Traffic Cams!"),r.a.createElement(I.a.Text,null,"Nothing beats live cameras if you want to find out traffic conditions. That's why I've created a database of cameras distributing a live feed of the city's roadways. Each avenue is organized from uptown to downtown. I'm constantly adding cameras,please feel free to request new streets/avenues though the link above. Happy motoring in the Big Apple :)"),r.a.createElement(V.a,{animation:"grow",variant:"danger"})),r.a.createElement(I.a.Footer,{className:"text-muted"},"The cameras are maintaned by NYC DOT and other NYC city agencies!")))}}]),a}(n.Component),Q=Object(E.b)((function(e){return{cameras:e.cameras}}),(function(e){return{removeCam:function(t){return e({type:"REMOVE_CAMERA",url:t})}}}))(F),W=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement(j,null),r.a.createElement(T.b,{path:"/request",component:B}),r.a.createElement(T.b,{path:"/cameras",component:w}),r.a.createElement(T.b,{exact:!0,path:"/",component:Q}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(59);var L=a(25),Y=a(43),G=Object(L.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cameras:[],avenues:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_AVENUES":return Object(N.a)(Object(N.a)({},e),{},{avenues:t.avenues,requestCreated:""});case"ADD_CAMERAS":return Object(N.a)(Object(N.a)({},e),{},{cameras:t.cameras});case"REMOVE_CAMERA":var a=e.cameras.filter((function(e){return e.url!==t.url}));return Object(N.a)(Object(N.a)({},e),{},{cameras:a});case"REQUEST_SENT":return Object(N.a)(Object(N.a)({},e),{},{requestCreated:t.data});case"REQUEST_ALERT_SEEN":return Object(N.a)(Object(N.a)({},e),{},{requestCreated:""});case"RESET":return Object(N.a)(Object(N.a)({},e),{},{cameras:[],displayInputForm:!1});default:return e}}),Object(L.a)(Y.a));i.a.render(r.a.createElement(E.a,{store:G},r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[45,1,2]]]);
//# sourceMappingURL=main.ba5f8f99.chunk.js.map